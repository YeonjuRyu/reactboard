<!DOCTYPE html>
<html lang="ko-KR">
<head>
<title>CSS Website Layout</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="mainstyle.css">
<script src="./functions.js"></script> <!--api post get functions-->
</head>

<body>

  <div class="topnav">
    <a>React Board</a>
    <b href="#">로그인</b>
    <b href="#">사진</b>
    <b href="#">소개</b>
    <b href="#">게시판</b>
  </div>
  
  <div class="row">
    <div class="column left">
      <h1>게시판</h1>
       <div id="board_name" class = "table_style_left"> <!--일단 div로 영역을 만듬 이후에 js로 내부 태그 생성-->
    </div>
   </div>
   
    <div class="column middle"> <!--게시글 전문을 가져올 부분-->
      <div id="post_detail" class = "table_style_middle"></div>
      <!--Array순서대로 불러오다보니 원하는 순서로 내용을 조정할 수 없-->
    </div>
  </div>
  <div class="footer">
    <p> Copyright ⓒ Your Website 2019 </p>
  
    <script>
        {
          /*
          <!-- below items are created as # of board exists at server-->
          //api call : getBoardList return ... */
          var boardList = document.getElementById("board_name")
  
          //api에 있는 board list의 개수를  -> for문을 돌려서 가져온 후, 그만큼 카테고리 생성
          getboardlist( _boardList => {
            for(var i=0; i<_boardList.length; i++) {
              var ul = document.createElement('ul');
              var li = document.createElement('li');
              var a = document.createElement('a');
              a.innerHTML = _boardList[i].board_name;
  
              ul.appendChild(li); //ul 아래에 li을 넣어줌
              li.appendChild(a); //ul 아래에 a를 넣어줌
  
              boardList.appendChild(ul); 
            }
          });
        };
  
        {
          var postDetail = document.getElementById("post_detail")
          /*
          postDetail = {
          "id": 1,
          "board_id": 1,
          "post_title": "美 공모펀드 인기… 직접 투자도 해볼만 해외 부동산 투자해볼까",
          "post_content": "국내 부동산 경기가 침체되면서 해외 부동산 투자로 눈을 돌리... ",
          "post_reg_date": "2019-07-19 02:21:39 PM",
          "post_user_name": "곽현철",
          "post_reg_ip": "211.111.222.333"		
          }
          class PostDetail {
            int _id;
            int _board_id;
            ...
          }
          PostDetail postDetail();
          postDetail.id;
          */
          console.log('id:' + postDetail.id);
          console.log('post_title:' + postDetail.post_title);

          getpostdetail( postDetail => { //
            //for(var i=0; i<_postDetail.length; i++){
            var ul = document.createElement('ul');  //post하나당 ul칸을 하나 일단 만들고 (서식용)
            var li = document.createElement('li'); //그 아래 li을 만들어서 값을 넣어준다. (서식용)  

            var keys = Object.keys(postDetail);
            var values = Object.values(postDetail);
            for (var i=0; i<key.length-2; i++){ //!fixme: object의 key값을 direct access하게 변경
              var p = document.createElement('p');
              p.id = key[i+2];
              p.innerHTML = value[i+2];
              li.appendChild(p);
            }
            ul.appendChild(li);
            postDetail.appendChild(ul);
            });
          };
    </script>
  </body>
  </html>
